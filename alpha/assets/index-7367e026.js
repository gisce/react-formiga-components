import{r,R as $}from"./index-76fb7be0.js";import{c as k}from"./index-86654eeb.js";import{_ as A,a as E,i as Q}from"./context-13a51095.js";import{_ as X,f as Z,t as ee,d as te,q as I,C as D,u as ne,v as oe,x as re}from"./genStyleUtils-4eaa55a5.js";import{w as g,b as se,u as ae}from"./index-95593828.js";import{c as ie}from"./reactNode-9d24d027.js";import{R as ue}from"./index-da03a860.js";var h=X({},ue),ce=h.version,y=h.render,le=h.unmountComponentAtNode,w;try{var de=Number((ce||"").split(".")[0]);de>=18&&(w=h.createRoot)}catch{}function L(e){var t=h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&Z(t)==="object"&&(t.usingClientEntryPoint=e)}var C="__rc_react_root__";function fe(e,t){L(!0);var n=t[C]||w(t);L(!1),n.render(e),t[C]=n}function me(e,t){y==null||y(e,t)}function pe(e,t){if(w){fe(e,t);return}me(e,t)}function ve(e){return N.apply(this,arguments)}function N(){return N=A(E().mark(function e(t){return E().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Promise.resolve().then(function(){var s;(s=t[C])===null||s===void 0||s.unmount(),delete t[C]}));case 1:case"end":return o.stop()}},e)})),N.apply(this,arguments)}function be(e){le(e)}function Re(e){return x.apply(this,arguments)}function x(){return x=A(E().mark(function e(t){return E().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(w===void 0){o.next=2;break}return o.abrupt("return",ve(t));case 2:be(t);case 3:case"end":return o.stop()}},e)})),x.apply(this,arguments)}const he=(e,t)=>(pe(e,t),()=>Re(t));let _e=he;function Ee(){return _e}const ge=e=>{const{componentCls:t,colorPrimary:n}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${n})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${e.motionDurationSlow} ${e.motionEaseInOut}`,`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`].join(",")}}}}},Ce=ee("Wave",e=>[ge(e)]),U=`${te}-wave-target`;function S(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function we(e){const{borderTopColor:t,borderColor:n,backgroundColor:o}=getComputedStyle(e);return S(t)?t:S(n)?n:S(o)?o:null}function W(e){return Number.isNaN(e)?0:e}const ye=e=>{const{className:t,target:n,component:o,registerUnmount:s}=e,u=r.useRef(null),c=r.useRef(null);r.useEffect(()=>{c.current=s()},[]);const[d,_]=r.useState(null),[f,a]=r.useState([]),[p,v]=r.useState(0),[j,B]=r.useState(0),[P,q]=r.useState(0),[F,z]=r.useState(0),[M,H]=r.useState(!1),T={left:p,top:j,width:P,height:F,borderRadius:f.map(l=>`${l}px`).join(" ")};d&&(T["--wave-color"]=d);function O(){const l=getComputedStyle(n);_(we(n));const i=l.position==="static",{borderLeftWidth:m,borderTopWidth:b}=l;v(i?n.offsetLeft:W(-parseFloat(m))),B(i?n.offsetTop:W(-parseFloat(b))),q(n.offsetWidth),z(n.offsetHeight);const{borderTopLeftRadius:R,borderTopRightRadius:G,borderBottomLeftRadius:K,borderBottomRightRadius:Y}=l;a([R,G,Y,K].map(J=>W(parseFloat(J))))}if(r.useEffect(()=>{if(n){const l=g(()=>{O(),H(!0)});let i;return typeof ResizeObserver<"u"&&(i=new ResizeObserver(O),i.observe(n)),()=>{g.cancel(l),i==null||i.disconnect()}}},[]),!M)return null;const V=(o==="Checkbox"||o==="Radio")&&(n==null?void 0:n.classList.contains(U));return r.createElement(se,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(l,i)=>{var m,b;if(i.deadline||i.propertyName==="opacity"){const R=(m=u.current)===null||m===void 0?void 0:m.parentElement;(b=c.current)===null||b===void 0||b.call(c).then(()=>{R==null||R.remove()})}return!1}},(l,i)=>{let{className:m}=l;return r.createElement("div",{ref:I(u,i),className:k(t,m,{"wave-quick":V}),style:T})})},Se=(e,t)=>{var n;const{component:o}=t;if(o==="Checkbox"&&!(!((n=e.querySelector("input"))===null||n===void 0)&&n.checked))return;const s=document.createElement("div");s.style.position="absolute",s.style.left="0px",s.style.top="0px",e==null||e.insertBefore(s,e==null?void 0:e.firstChild);const u=Ee();let c=null;function d(){return c}c=u(r.createElement(ye,Object.assign({},t,{target:e,registerUnmount:d})),s)},We=Se,Ne=(e,t,n)=>{const{wave:o}=r.useContext(D),[,s,u]=ne(),c=ae(f=>{const a=e.current;if(o!=null&&o.disabled||!a)return;const p=a.querySelector(`.${U}`)||a,{showEffect:v}=o||{};(v||We)(p,{className:t,token:s,component:n,event:f,hashId:u})}),d=r.useRef(null);return f=>{g.cancel(d.current),d.current=g(()=>{c(f)})}},xe=Ne,Te=e=>{const{children:t,disabled:n,component:o}=e,{getPrefixCls:s}=r.useContext(D),u=r.useRef(null),c=s("wave"),[,d]=Ce(c),_=xe(u,k(c,d),o);if($.useEffect(()=>{const a=u.current;if(!a||a.nodeType!==1||n)return;const p=v=>{!Q(v.target)||!a.getAttribute||a.getAttribute("disabled")||a.disabled||a.className.includes("disabled")||a.className.includes("-leave")||_(v)};return a.addEventListener("click",p,!0),()=>{a.removeEventListener("click",p,!0)}},[n]),!$.isValidElement(t))return t??null;const f=oe(t)?I(re(t),u):u;return ie(t,{ref:f})},Ue=Te;export{U as T,Ue as W,Ee as g};
