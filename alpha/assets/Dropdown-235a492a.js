import{j as l}from"./jsx-runtime-f6d73c06.js";import{r as s}from"./index-8ee6c85d.js";import{S as X}from"./index-da324853.js";import{I as Y}from"./index-fe8159f5.js";import{g as J,e as K,a as z,C as Q,c as _,l as U,n as Z,o as ee,p as ne,q as oe}from"./index-7b090294.js";import{a as M,b as te}from"./assertThisInitialized-f89cd6ac.js";import{C as re}from"./CheckCircleFilled-a5402013.js";import{C as se}from"./CloseCircleFilled-8482a999.js";import{C as ae}from"./CloseOutlined-0c9b81b5.js";import{E as ie}from"./ExclamationCircleFilled-47ac793a.js";import{I as le}from"./InfoCircleFilled-a570e26c.js";import{p as ce}from"./pickAttrs-217b3c15.js";import{r as de}from"./reactNode-c432c2b0.js";import{D as ue}from"./index-96d27e2f.js";const I=(e,n,o,t,r)=>({background:e,border:`${z(t.lineWidth)} ${t.lineType} ${n}`,[`${r}-icon`]:{color:o}}),pe=e=>{const{componentCls:n,motionDurationSlow:o,marginXS:t,marginSM:r,fontSize:c,fontSizeLG:i,lineHeight:d,borderRadiusLG:f,motionEaseInOutCirc:u,withDescriptionIconSize:g,colorText:p,colorTextHeading:C,withDescriptionPadding:h,defaultPadding:b}=e;return{[n]:Object.assign(Object.assign({},K(e)),{position:"relative",display:"flex",alignItems:"center",padding:b,wordWrap:"break-word",borderRadius:f,[`&${n}-rtl`]:{direction:"rtl"},[`${n}-content`]:{flex:1,minWidth:0},[`${n}-icon`]:{marginInlineEnd:t,lineHeight:0},"&-description":{display:"none",fontSize:c,lineHeight:d},"&-message":{color:C},[`&${n}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${o} ${u}, opacity ${o} ${u},
        padding-top ${o} ${u}, padding-bottom ${o} ${u},
        margin-bottom ${o} ${u}`},[`&${n}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${n}-with-description`]:{alignItems:"flex-start",padding:h,[`${n}-icon`]:{marginInlineEnd:r,fontSize:g,lineHeight:0},[`${n}-message`]:{display:"block",marginBottom:t,color:C,fontSize:i},[`${n}-description`]:{display:"block",color:p}},[`${n}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},me=e=>{const{componentCls:n,colorSuccess:o,colorSuccessBorder:t,colorSuccessBg:r,colorWarning:c,colorWarningBorder:i,colorWarningBg:d,colorError:f,colorErrorBorder:u,colorErrorBg:g,colorInfo:p,colorInfoBorder:C,colorInfoBg:h}=e;return{[n]:{"&-success":I(r,t,o,e,n),"&-info":I(h,C,p,e,n),"&-warning":I(d,i,c,e,n),"&-error":Object.assign(Object.assign({},I(g,u,f,e,n)),{[`${n}-description > pre`]:{margin:0,padding:0}})}}},fe=e=>{const{componentCls:n,iconCls:o,motionDurationMid:t,marginXS:r,fontSizeIcon:c,colorIcon:i,colorIconHover:d}=e;return{[n]:{"&-action":{marginInlineStart:r},[`${n}-close-icon`]:{marginInlineStart:r,padding:0,overflow:"hidden",fontSize:c,lineHeight:z(c),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${o}-close`]:{color:i,transition:`color ${t}`,"&:hover":{color:d}}},"&-close-text":{color:i,transition:`color ${t}`,"&:hover":{color:d}}}}},ge=e=>({withDescriptionIconSize:e.fontSizeHeading3,defaultPadding:`${e.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`}),he=J("Alert",e=>[pe(e),me(e),fe(e)],ge);var ye=globalThis&&globalThis.__rest||function(e,n){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(e);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(o[t[r]]=e[t[r]]);return o};const Ce={success:re,info:le,error:se,warning:ie},be=e=>{const{icon:n,prefixCls:o,type:t}=e,r=Ce[t]||null;return n?de(n,s.createElement("span",{className:`${o}-icon`},n),()=>({className:_(`${o}-icon`,{[n.props.className]:n.props.className})})):s.createElement(r,{className:`${o}-icon`})},we=e=>{const{isClosable:n,prefixCls:o,closeIcon:t,handleClose:r}=e,c=t===!0||t===void 0?s.createElement(ae,null):t;return n?s.createElement("button",{type:"button",onClick:r,className:`${o}-close-icon`,tabIndex:0},c):null},Se=e=>{const{description:n,prefixCls:o,message:t,banner:r,className:c,rootClassName:i,style:d,onMouseEnter:f,onMouseLeave:u,onClick:g,afterClose:p,showIcon:C,closable:h,closeText:b,closeIcon:a,action:y}=e,S=ye(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action"]),[j,H]=s.useState(!1),P=s.useRef(null),{getPrefixCls:V,direction:k,alert:w}=s.useContext(Q),m=V("alert",o),[T,L,q]=he(m),R=x=>{var $;H(!0),($=e.onClose)===null||$===void 0||$.call(e,x)},D=s.useMemo(()=>e.type!==void 0?e.type:r?"warning":"info",[e.type,r]),A=s.useMemo(()=>b?!0:typeof h=="boolean"?h:a!==!1&&a!==null&&a!==void 0,[b,a,h]),O=r&&C===void 0?!0:C,G=_(m,`${m}-${D}`,{[`${m}-with-description`]:!!n,[`${m}-no-icon`]:!O,[`${m}-banner`]:!!r,[`${m}-rtl`]:k==="rtl"},w==null?void 0:w.className,c,i,q,L),F=ce(S,{aria:!0,data:!0});return T(s.createElement(U,{visible:!j,motionName:`${m}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:x=>({maxHeight:x.offsetHeight}),onLeaveEnd:p},x=>{let{className:$,style:W}=x;return s.createElement("div",Object.assign({ref:P,"data-show":!j,className:_(G,$),style:Object.assign(Object.assign(Object.assign({},w==null?void 0:w.style),d),W),onMouseEnter:f,onMouseLeave:u,onClick:g,role:"alert"},F),O?s.createElement(be,{description:n,icon:e.icon,prefixCls:m,type:D}):null,s.createElement("div",{className:`${m}-content`},t?s.createElement("div",{className:`${m}-message`},t):null,n?s.createElement("div",{className:`${m}-description`},n):null),y?s.createElement("div",{className:`${m}-action`},y):null,s.createElement(we,{isClosable:A,prefixCls:m,closeIcon:b||a,handleClose:R}))}))},xe=Se;function $e(e,n,o){return n=M(n),oe(e,te()?Reflect.construct(n,o||[],M(e).constructor):n.apply(e,o))}let Ie=function(e){Z(n,e);function n(){var o;return ee(this,n),o=$e(this,n,arguments),o.state={error:void 0,info:{componentStack:""}},o}return ne(n,[{key:"componentDidCatch",value:function(t,r){this.setState({error:t,info:r})}},{key:"render",value:function(){const{message:t,description:r,children:c}=this.props,{error:i,info:d}=this.state,f=d&&d.componentStack?d.componentStack:null,u=typeof t>"u"?(i||"").toString():t,g=typeof r>"u"?f:r;return i?s.createElement(xe,{type:"error",message:u,description:s.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},g)}):c}}]),n}(s.Component);const ve=Ie,{Search:_e}=Y,E=({onRetrieveData:e,searchable:n,onItemClick:o})=>{const t=s.useRef(null),[r,c]=s.useState(),[i,d]=s.useState([]),[f,u]=s.useState(!0);s.useEffect(()=>{g()},[]),s.useEffect(()=>{setTimeout(()=>{var a;return(a=t.current)==null?void 0:a.select()})},[]);const g=s.useCallback(async()=>{u(!0);const a=await(e==null?void 0:e());d(a),u(!1)},[e]),p=v(i),C=n===!0||n==="auto"&&p.length>3,h=s.useCallback(a=>{const y=a==null?void 0:a.trim();if(y&&y.length>0){c(y);return}c(void 0)},[]),b=s.useMemo(()=>r?i.map(a=>({...a,items:a.items.filter(y=>y.name.toLowerCase().includes(r.toLowerCase()))})).filter(a=>a.items.length>0):i,[i,r]);return f?l.jsx(B,{children:l.jsx("div",{style:{padding:15,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(X,{})})}):l.jsxs(B,{children:[C&&l.jsx("div",{style:{padding:5},children:l.jsx(_e,{ref:t,onChange:a=>h(a.target.value),onSearch:h,allowClear:!0})}),l.jsx("div",{style:{width:300,overflowY:"auto"},children:b.map((a,y)=>l.jsx(Ne,{title:a.label,children:a.items.map(S=>l.jsx(Ee,{item:S,onClick:()=>o==null?void 0:o(S)},S.id))},`${a.label}-${y}`))})]})},B=({children:e})=>l.jsx("div",{className:"ant-dropdown-menu ant-dropdown-menu-root ant-dropdown-menu-vertical ant-dropdown-menu-light",style:{overflow:"hidden"},children:e}),Ee=({item:e,onClick:n})=>l.jsx("li",{className:"ant-dropdown-menu-item ant-dropdown-menu-item-only-child",role:"menuitem",onClick:n,children:l.jsx("span",{className:"ant-dropdown-menu-title-content",children:e.name})}),Ne=({title:e,children:n})=>l.jsxs("li",{role:"presentation",className:"ant-dropdown-menu-item-group",children:[l.jsx("div",{role:"presentation",className:"ant-dropdown-menu-item-group-title",title:e,children:e}),l.jsx("ul",{role:"group",className:"ant-dropdown-menu-item-group-list",children:n})]}),v=e=>e.reduce((n,o)=>[...n,...o.items],[]);try{E.displayName="DropdownMenu",E.__docgenInfo={description:"",displayName:"DropdownMenu",props:{searchable:{defaultValue:null,description:"",name:"searchable",required:!1,type:{name:'boolean | "auto"'}},onItemClick:{defaultValue:null,description:"",name:"onItemClick",required:!1,type:{name:"((item: DropdownMenuItem) => void)"}},onRetrieveData:{defaultValue:null,description:"",name:"onRetrieveData",required:!0,type:{name:"() => Promise<DropdownMenuGroup[]>"}}}}}catch{}try{v.displayName="flattenDropdownItems",v.__docgenInfo={description:"",displayName:"flattenDropdownItems",props:{}}}catch{}const N=s.memo(({onRetrieveData:e,onItemClick:n,disabled:o=!1,searchable:t="auto",children:r,trigger:c=["click"]})=>{const[i,d]=s.useState(!1),[f,u]=s.useState(o),g=s.useCallback(async()=>{const p=await(e==null?void 0:e());return v(p).length===0&&u(!0),p},[e]);return l.jsx(ve,{children:l.jsx(ue,{dropdownRender:()=>l.jsx(E,{searchable:t,onRetrieveData:g,onItemClick:p=>{d(!1),n==null||n(p)}}),disabled:f||o,trigger:c,onOpenChange:p=>{d(p)},open:i,destroyPopupOnHide:!0,children:r})})});N.displayName="Dropdown";try{N.displayName="Dropdown",N.__docgenInfo={description:"",displayName:"Dropdown",props:{searchable:{defaultValue:null,description:"",name:"searchable",required:!1,type:{name:'boolean | "auto"'}},onItemClick:{defaultValue:null,description:"",name:"onItemClick",required:!1,type:{name:"((item: DropdownMenuItem) => void)"}},onRetrieveData:{defaultValue:null,description:"",name:"onRetrieveData",required:!0,type:{name:"() => Promise<DropdownMenuGroup[]>"}},trigger:{defaultValue:null,description:"",name:"trigger",required:!1,type:{name:'("click" | "hover")[]'}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}}}catch{}export{N as D};
