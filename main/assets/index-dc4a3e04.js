import{r,R as $}from"./index-76fb7be0.js";import{c as A}from"./index-86654eeb.js";import{_ as I,a as E,i as X}from"./context-6c51d9c0.js";import{_ as Z,f as ee,t as te,d as ne,q as D,C as U,u as oe,v as re,x as se}from"./genStyleUtils-4c750380.js";import{w as g,b as ae,u as ie}from"./index-c37db011.js";import{c as ue}from"./reactNode-9d24d027.js";import{R as ce}from"./index-da03a860.js";var h=Z({},ce),le=h.version,w=h.render,de=h.unmountComponentAtNode,S;try{var fe=Number((le||"").split(".")[0]);fe>=18&&(S=h.createRoot)}catch{}function L(e){var t=h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&ee(t)==="object"&&(t.usingClientEntryPoint=e)}var C="__rc_react_root__";function me(e,t){L(!0);var n=t[C]||S(t);L(!1),n.render(e),t[C]=n}function pe(e,t){w==null||w(e,t)}function ve(e,t){if(S){me(e,t);return}pe(e,t)}function be(e){return N.apply(this,arguments)}function N(){return N=I(E().mark(function e(t){return E().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Promise.resolve().then(function(){var s;(s=t[C])===null||s===void 0||s.unmount(),delete t[C]}));case 1:case"end":return o.stop()}},e)})),N.apply(this,arguments)}function Re(e){de(e)}function he(e){return x.apply(this,arguments)}function x(){return x=I(E().mark(function e(t){return E().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(S===void 0){o.next=2;break}return o.abrupt("return",be(t));case 2:Re(t);case 3:case"end":return o.stop()}},e)})),x.apply(this,arguments)}const _e=(e,t)=>(ve(e,t),()=>he(t));let k=_e;function Ee(e){return e&&(k=e),k}const ge=e=>{const{componentCls:t,colorPrimary:n}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${n})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${e.motionDurationSlow} ${e.motionEaseInOut}`,`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`].join(",")}}}}},Ce=te("Wave",e=>[ge(e)]),j=`${ne}-wave-target`;function y(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function Se(e){const{borderTopColor:t,borderColor:n,backgroundColor:o}=getComputedStyle(e);return y(t)?t:y(n)?n:y(o)?o:null}function W(e){return Number.isNaN(e)?0:e}const we=e=>{const{className:t,target:n,component:o,registerUnmount:s}=e,u=r.useRef(null),c=r.useRef(null);r.useEffect(()=>{c.current=s()},[]);const[d,_]=r.useState(null),[f,a]=r.useState([]),[p,v]=r.useState(0),[B,P]=r.useState(0),[q,F]=r.useState(0),[z,M]=r.useState(0),[H,V]=r.useState(!1),T={left:p,top:B,width:q,height:z,borderRadius:f.map(l=>`${l}px`).join(" ")};d&&(T["--wave-color"]=d);function O(){const l=getComputedStyle(n);_(Se(n));const i=l.position==="static",{borderLeftWidth:m,borderTopWidth:b}=l;v(i?n.offsetLeft:W(-parseFloat(m))),P(i?n.offsetTop:W(-parseFloat(b))),F(n.offsetWidth),M(n.offsetHeight);const{borderTopLeftRadius:R,borderTopRightRadius:K,borderBottomLeftRadius:Y,borderBottomRightRadius:J}=l;a([R,K,J,Y].map(Q=>W(parseFloat(Q))))}if(r.useEffect(()=>{if(n){const l=g(()=>{O(),V(!0)});let i;return typeof ResizeObserver<"u"&&(i=new ResizeObserver(O),i.observe(n)),()=>{g.cancel(l),i==null||i.disconnect()}}},[]),!H)return null;const G=(o==="Checkbox"||o==="Radio")&&(n==null?void 0:n.classList.contains(j));return r.createElement(ae,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(l,i)=>{var m,b;if(i.deadline||i.propertyName==="opacity"){const R=(m=u.current)===null||m===void 0?void 0:m.parentElement;(b=c.current)===null||b===void 0||b.call(c).then(()=>{R==null||R.remove()})}return!1}},(l,i)=>{let{className:m}=l;return r.createElement("div",{ref:D(u,i),className:A(t,m,{"wave-quick":G}),style:T})})},ye=(e,t)=>{var n;const{component:o}=t;if(o==="Checkbox"&&!(!((n=e.querySelector("input"))===null||n===void 0)&&n.checked))return;const s=document.createElement("div");s.style.position="absolute",s.style.left="0px",s.style.top="0px",e==null||e.insertBefore(s,e==null?void 0:e.firstChild);const u=Ee();let c=null;function d(){return c}c=u(r.createElement(we,Object.assign({},t,{target:e,registerUnmount:d})),s)},We=ye,Ne=(e,t,n)=>{const{wave:o}=r.useContext(U),[,s,u]=oe(),c=ie(f=>{const a=e.current;if(o!=null&&o.disabled||!a)return;const p=a.querySelector(`.${j}`)||a,{showEffect:v}=o||{};(v||We)(p,{className:t,token:s,component:n,event:f,hashId:u})}),d=r.useRef(null);return f=>{g.cancel(d.current),d.current=g(()=>{c(f)})}},xe=Ne,Te=e=>{const{children:t,disabled:n,component:o}=e,{getPrefixCls:s}=r.useContext(U),u=r.useRef(null),c=s("wave"),[,d]=Ce(c),_=xe(u,A(c,d),o);if($.useEffect(()=>{const a=u.current;if(!a||a.nodeType!==1||n)return;const p=v=>{!X(v.target)||!a.getAttribute||a.getAttribute("disabled")||a.disabled||a.className.includes("disabled")||a.className.includes("-leave")||_(v)};return a.addEventListener("click",p,!0),()=>{a.removeEventListener("click",p,!0)}},[n]),!$.isValidElement(t))return t??null;const f=re(t)?D(se(t),u):u;return ue(t,{ref:f})},Ue=Te;export{j as T,Ue as W,Ee as u};
